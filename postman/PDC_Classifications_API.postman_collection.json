{
  "info": {
    "name": "PDC Classifications & Retention Policies API",
    "description": "Complete CRUD operations for PDC Classifications, Retention Policies, and Lookup API with unified service architecture, comprehensive testing including batch operations and advanced pagination (offset & cursor-based). Updated field name from pdc_code to classification_code for better API consistency (v5.1.0)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "5.1.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:7071",
      "type": "string"
    },
    {
      "key": "classification_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_code",
      "value": "TEST_{{$randomAlphaNumeric}}",
      "type": "string"
    },
    {
      "key": "lookup_type",
      "value": "STATUS",
      "type": "string"
    },
    {
      "key": "lookup_code",
      "value": "ACTIVE",
      "type": "string"
    },
    {
      "key": "next_cursor",
      "value": "",
      "type": "string"
    },
    {
      "key": "lookup_next_cursor",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_page_size",
      "value": "10",
      "type": "string"
    },
    {
      "key": "expected_template_name",
      "value": "",
      "type": "string",
      "description": "Template name returned in classification responses (v4.0.0 feature)"
    },
    {
      "key": "retention_policy_id",
      "value": "",
      "type": "string",
      "description": "Retention policy ID for testing retention policy operations (v5.0.0 feature)"
    },
    {
      "key": "test_retention_code",
      "value": "TEST_{{$randomAlphaNumeric}}",
      "type": "string",
      "description": "Generated retention code for testing (v5.0.0 feature)"
    }
  ],
  "item": [
    {
      "name": "Health & Diagnostics",
      "item": [
        {
          "name": "Basic Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Health check returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Health check has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('status');",
                  "    pm.expect(responseJson).to.have.property('timestamp');",
                  "    pm.expect(responseJson).to.have.property('service');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "health"
              ]
            }
          }
        },
        {
          "name": "Detailed Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Detailed health check returns 200 or 503', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 503]);",
                  "});",
                  "",
                  "pm.test('Detailed health has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('status');",
                  "    pm.expect(responseJson).to.have.property('timestamp');",
                  "    pm.expect(responseJson).to.have.property('service');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/health/detailed",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "health",
                "detailed"
              ]
            }
          }
        },
        {
          "name": "Diagnostic Information",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Diagnostic endpoint returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Diagnostic has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('timestamp');",
                  "    pm.expect(responseJson).to.have.property('environment');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/diagnostic",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "diagnostic"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Classifications",
      "item": [
        {
          "name": "Get All Classifications",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get all classifications returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has new pagination structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('pagination');",
                  "    pm.expect(responseJson).to.have.property('metadata');",
                  "    ",
                  "    // Check pagination object",
                  "    const pagination = responseJson.pagination;",
                  "    pm.expect(pagination).to.have.property('page');",
                  "    pm.expect(pagination).to.have.property('size');",
                  "    pm.expect(pagination).to.have.property('total');",
                  "    pm.expect(pagination).to.have.property('pages');",
                  "    pm.expect(pagination).to.have.property('has_next');",
                  "    pm.expect(pagination).to.have.property('has_previous');",
                  "    ",
                  "    // Check metadata object",
                  "    const metadata = responseJson.metadata;",
                  "    pm.expect(metadata).to.have.property('sort_info');",
                  "    pm.expect(metadata).to.have.property('execution_time_ms');",
                  "    ",
                  "    pm.expect(responseJson.items).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Classifications have required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        pm.expect(firstItem).to.have.property('id');",
                  "        pm.expect(firstItem).to.have.property('classification_id');",
                  "        pm.expect(firstItem).to.have.property('classification_code');",
                  "        pm.expect(firstItem).to.have.property('name');",
                  "        pm.expect(firstItem).to.have.property('code');",
                  "        pm.expect(firstItem).to.have.property('status');",
                  "        ",
                  "        // Store first classification ID for other tests",
                  "        pm.collectionVariables.set('classification_id', firstItem.classification_id);",
                  "    }",
                  "});",
                  "",
                  "pm.test('ðŸ†• v4.0.0: Classifications include template names', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        ",
                  "        // v4.0.0 feature: template_name field should be present",
                  "        pm.expect(firstItem).to.have.property('template_name');",
                  "        ",
                  "        // Template name should be a string (could be null for records without templates)",
                  "        if (firstItem.template_name !== null) {",
                  "            pm.expect(firstItem.template_name).to.be.a('string');",
                  "            pm.collectionVariables.set('expected_template_name', firstItem.template_name);",
                  "        }",
                  "        ",
                  "        console.log('âœ… Template name field found:', firstItem.template_name);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Pagination math is correct', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const pagination = responseJson.pagination;",
                  "    ",
                  "    pm.expect(pagination.page).to.be.at.least(1);",
                  "    pm.expect(pagination.size).to.be.at.least(1);",
                  "    pm.expect(pagination.total).to.be.at.least(0);",
                  "    ",
                  "    if (pagination.total > 0) {",
                  "        const expectedPages = Math.ceil(pagination.total / pagination.size);",
                  "        pm.expect(pagination.pages).to.equal(expectedPages);",
                  "    }",
                  "});",
                  "",
                  "pm.test('ðŸ†• v4.1.0: Classifications include retention policy fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        ",
                  "        // v4.1.0 feature: retention policy fields should be present",
                  "        pm.expect(firstItem).to.have.property('retention_policy_id');",
                  "        pm.expect(firstItem).to.have.property('retention_code');",
                  "        pm.expect(firstItem).to.have.property('retention_type');",
                  "        pm.expect(firstItem).to.have.property('min_retention_years');",
                  "        pm.expect(firstItem).to.have.property('max_retention_years');",
                  "        pm.expect(firstItem).to.have.property('legal_hold_flag');",
                  "        ",
                  "        console.log('âœ… v4.1.0: Retention policy fields found:');",
                  "        console.log('  - Code:', firstItem.retention_code);",
                  "        console.log('  - Type:', firstItem.retention_type);",
                  "        console.log('  - Years:', firstItem.min_retention_years + '-' + firstItem.max_retention_years);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications?page=1&size=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get Classification by ID",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure we have a classification_id set",
                  "const classificationId = pm.collectionVariables.get('classification_id');",
                  "if (!classificationId) {",
                  "    pm.collectionVariables.set('classification_id', '1'); // Default to ID 1",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get classification by ID returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Classification has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('id');",
                  "    pm.expect(responseJson).to.have.property('classification_code');",
                  "    pm.expect(responseJson).to.have.property('description');",
                  "    pm.expect(responseJson).to.have.property('status');",
                  "    pm.expect(responseJson).to.have.property('created_at');",
                  "});",
                  "",
                  "pm.test('Classification has retention policy fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('retention_code');",
                  "    pm.expect(responseJson).to.have.property('retention_type');",
                  "    pm.expect(responseJson).to.have.property('trigger_event');",
                  "    pm.expect(responseJson).to.have.property('min_retention_years');",
                  "    pm.expect(responseJson).to.have.property('max_retention_years');",
                  "    pm.expect(responseJson).to.have.property('legal_hold_flag');",
                  "    pm.expect(responseJson).to.have.property('destruction_method');",
                  "    pm.expect(responseJson).to.have.property('review_frequency');",
                  "    ",
                  "    console.log('âœ… Retention policy fields present:');",
                  "    console.log('  - Retention Code:', responseJson.retention_code);",
                  "    console.log('  - Retention Type:', responseJson.retention_type);",
                  "    console.log('  - Min/Max Years:', responseJson.min_retention_years + '/' + responseJson.max_retention_years);",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications/{{classification_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications",
                "{{classification_id}}"
              ]
            }
          }
        },
        {
          "name": "Create New Classification",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate unique test code",
                  "const testCode = 'TEST_' + Math.random().toString(36).substr(2, 9).toUpperCase();",
                  "pm.collectionVariables.set('test_code', testCode);",
                  "",
                  "console.log('Creating classification with code:', testCode);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Create classification returns 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Created classification has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('id');",
                  "    pm.expect(responseJson).to.have.property('classification_code');",
                  "    pm.expect(responseJson).to.have.property('description');",
                  "    pm.expect(responseJson).to.have.property('status');",
                  "    pm.expect(responseJson).to.have.property('created_at');",
                  "    ",
                  "    // Store created classification ID for update/delete tests",
                  "    pm.collectionVariables.set('created_classification_id', responseJson.classification_id);",
                  "});",
                  "",
                  "pm.test('ðŸ†• v4.1.0: Created classification has retention policy fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('retention_code');",
                  "    pm.expect(responseJson).to.have.property('retention_type');",
                  "    pm.expect(responseJson).to.have.property('trigger_event');",
                  "    pm.expect(responseJson).to.have.property('min_retention_years');",
                  "    pm.expect(responseJson).to.have.property('max_retention_years');",
                  "    pm.expect(responseJson).to.have.property('legal_hold_flag');",
                  "    pm.expect(responseJson).to.have.property('destruction_method');",
                  "    pm.expect(responseJson).to.have.property('review_frequency');",
                  "    ",
                  "    console.log('âœ… v4.1.0: Created with retention policy:');",
                  "    console.log('  - Code:', responseJson.retention_code);",
                  "    console.log('  - Type:', responseJson.retention_type);",
                  "    console.log('  - Years:', responseJson.min_retention_years + '-' + responseJson.max_retention_years);",
                  "});",
                  "",
                  "pm.test('Created classification has correct values', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const testCode = pm.collectionVariables.get('test_code');",
                  "    ",
                  "    pm.expect(responseJson.classification_code).to.eql(testCode);",
                  "    pm.expect(responseJson.description).to.eql('Test classification for API testing with retention policy');",
                  "    pm.expect(responseJson.status).to.eql('active');",
                  "    pm.expect(responseJson.classification_level).to.eql('test');",
                  "    pm.expect(responseJson.media_type).to.eql('api_validation');",
                  "    pm.expect(responseJson.retention_policy_id).to.eql(1);",
                  "    ",
                  "    // Retention fields should come from the relationship",
                  "    if (responseJson.retention_code) {",
                  "        pm.expect(responseJson.retention_code).to.be.a('string');",
                  "    }",
                  "    if (responseJson.retention_type) {",
                  "        pm.expect(responseJson.retention_type).to.be.a('string');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"classification_code\": \"{{test_code}}\",\n  \"name\": \"Test Classification\",\n  \"description\": \"Test classification for API testing with retention policy\",\n  \"is_active\": true,\n  \"classification_level\": \"test\",\n  \"media_type\": \"api_validation\",\n  \"file_type\": \"test,api,validation\",\n  \"series\": \"document,report\",\n  \"retention_policy_id\": 1,\n  \"organization_id\": 1\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/classifications",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ]
            }
          }
        },
        {
          "name": "Update Classification",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure we have a created classification to update",
                  "const createdId = pm.collectionVariables.get('created_classification_id');",
                  "if (!createdId) {",
                  "    console.log('No created classification ID found, using default ID 1');",
                  "    pm.collectionVariables.set('created_classification_id', '1');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Update classification returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Updated classification has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('id');",
                  "    pm.expect(responseJson).to.have.property('classification_id');",
                  "    pm.expect(responseJson).to.have.property('classification_code');",
                  "    pm.expect(responseJson).to.have.property('name');",
                  "    pm.expect(responseJson).to.have.property('description');",
                  "    pm.expect(responseJson).to.have.property('status');",
                  "    pm.expect(responseJson).to.have.property('modified_at');",
                  "    pm.expect(responseJson).to.have.property('modified_by');",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('retention_code');",
                  "    pm.expect(responseJson).to.have.property('retention_type');",
                  "});",
                  "",
                  "pm.test('Classification was updated correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.description).to.eql('Updated test classification with retention policy changes');",
                  "    pm.expect(responseJson.status).to.eql('active');",
                  "    pm.expect(responseJson.classification_level).to.eql('updated_test');",
                  "    pm.expect(responseJson.media_type).to.eql('api_validation_updated');",
                  "    pm.expect(responseJson.retention_policy_id).to.eql(2);",
                  "    ",
                  "    // Retention fields should come from the retention policy relationship",
                  "    if (responseJson.retention_type) {",
                  "        pm.expect(responseJson.retention_type).to.be.a('string');",
                  "        console.log('Updated retention type:', responseJson.retention_type);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated test classification with retention policy changes\",\n  \"is_active\": true,\n  \"classification_level\": \"updated_test\",\n  \"media_type\": \"api_validation_updated\",\n  \"file_type\": \"test,api,validation\",\n  \"series\": \"document,report,archive\",\n  \"retention_policy_id\": 2\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/classifications/{{created_classification_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications",
                "{{created_classification_id}}"
              ]
            }
          }
        },
        {
          "name": "Delete Classification (Soft)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Delete classification returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Delete response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('classification_id');",
                  "    pm.expect(responseJson).to.have.property('is_deleted');",
                  "    pm.expect(responseJson).to.have.property('deleted_at');",
                  "    pm.expect(responseJson).to.have.property('deleted_by');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications/{{created_classification_id}}?deleted_by=api_test_user",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications",
                "{{created_classification_id}}"
              ],
              "query": [
                {
                  "key": "deleted_by",
                  "value": "api_test_user"
                }
              ]
            }
          }
        },
        {
          "name": "Restore Classification",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Restore classification returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Restore response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('classification_id');",
                  "    pm.expect(responseJson).to.have.property('is_deleted');",
                  "    pm.expect(responseJson.is_deleted).to.be.false;",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restored_by\": \"api_test_user\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/classifications/{{created_classification_id}}/restore",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications",
                "{{created_classification_id}}",
                "restore"
              ]
            }
          }
        },
        {
          "name": "Pagination - Offset Advanced",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Offset pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Advanced pagination structure validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    // Check main structure",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('pagination');",
                  "    pm.expect(responseJson).to.have.property('metadata');",
                  "    ",
                  "    // Validate pagination object",
                  "    const pagination = responseJson.pagination;",
                  "    pm.expect(pagination).to.have.property('page', 1);",
                  "    pm.expect(pagination).to.have.property('size', 5);",
                  "    pm.expect(pagination).to.have.property('total');",
                  "    pm.expect(pagination).to.have.property('pages');",
                  "    pm.expect(pagination).to.have.property('has_next');",
                  "    pm.expect(pagination).to.have.property('has_previous', false);",
                  "    ",
                  "    // Validate metadata",
                  "    const metadata = responseJson.metadata;",
                  "    pm.expect(metadata).to.have.property('filters_applied');",
                  "    pm.expect(metadata).to.have.property('sort_info');",
                  "    pm.expect(metadata).to.have.property('execution_time_ms');",
                  "});",
                  "",
                  "pm.test('Filter and sort validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    // Check applied filters",
                  "    pm.expect(metadata.filters_applied).to.have.property('is_active', true);",
                  "    ",
                  "    // Check sort info",
                  "    pm.expect(metadata.sort_info).to.have.property('sort_by', 'name');",
                  "    pm.expect(metadata.sort_info).to.have.property('sort_order', 'asc');",
                  "});",
                  "",
                  "pm.test('Items are sorted correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const items = responseJson.items;",
                  "    ",
                  "    if (items.length > 1) {",
                  "        for (let i = 0; i < items.length - 1; i++) {",
                  "            // Check sorting by name field",
                  "            pm.expect(items[i].name <= items[i + 1].name).to.be.true;",
                  "        }",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications?page=1&size=5&sort_by=name&sort_order=asc&is_active=true",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "5"
                },
                {
                  "key": "sort_by",
                  "value": "name"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                },
                {
                  "key": "is_active",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Pagination - Cursor Based",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Cursor pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Cursor pagination structure validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const pagination = responseJson.pagination;",
                  "    ",
                  "    // Cursor pagination should have cursors",
                  "    pm.expect(pagination).to.have.property('next_cursor');",
                  "    pm.expect(pagination).to.have.property('previous_cursor');",
                  "    ",
                  "    // Total should be -1 for cursor pagination (performance)",
                  "    pm.expect(pagination.total).to.equal(-1);",
                  "    pm.expect(pagination.pages).to.equal(-1);",
                  "    ",
                  "    // Store next cursor for subsequent test",
                  "    if (pagination.next_cursor) {",
                  "        pm.collectionVariables.set('next_cursor', pagination.next_cursor);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Cursor pagination metadata', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    pm.expect(metadata.sort_info).to.have.property('pagination_type', 'cursor');",
                  "    pm.expect(metadata.sort_info).to.have.property('sort_order', 'desc');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications?pagination_type=cursor&size=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ],
              "query": [
                {
                  "key": "pagination_type",
                  "value": "cursor"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Pagination - With Search",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Search with pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search results are filtered', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    // Should show search was applied",
                  "    pm.expect(metadata).to.have.property('search_term');",
                  "    ",
                  "    // Check if search term appears in results",
                  "    const items = responseJson.items;",
                  "    const searchTerm = 'test';",
                  "    ",
                  "    if (items.length > 0) {",
                  "        // At least one item should contain the search term",
                  "        const hasSearchTerm = items.some(item => ",
                  "            item.name.toLowerCase().includes(searchTerm) ||",
                  "            item.description?.toLowerCase().includes(searchTerm) ||",
                  "            item.classification_code?.toLowerCase().includes(searchTerm)",
                  "        );",
                  "        // Note: This might not always be true if no test data exists",
                  "        console.log('Search results found:', items.length);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications?page=1&size=20&search=test&sort_by=created_at&sort_order=desc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "search",
                  "value": "test"
                },
                {
                  "key": "sort_by",
                  "value": "created_at"
                },
                {
                  "key": "sort_order",
                  "value": "desc"
                }
              ]
            }
          }
        },
        {
          "name": "Pagination - Multiple Filters",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Multiple filters return 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Multiple filters applied correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    // Check all applied filters",
                  "    const filters = metadata.filters_applied;",
                  "    pm.expect(filters).to.have.property('is_active');",
                  "    pm.expect(filters).to.have.property('sensitivity_min');",
                  "    ",
                  "    // Verify filtering worked on returned items",
                  "    const items = responseJson.items;",
                  "    if (items.length > 0) {",
                  "        items.forEach(item => {",
                  "            if (item.sensitivity_rating !== null) {",
                  "                pm.expect(item.sensitivity_rating).to.be.at.least(2);",
                  "            }",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications?page=1&size=15&is_active=true&sensitivity_min=2&classification_level=SECRET&sort_by=sensitivity_rating&sort_order=desc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "15"
                },
                {
                  "key": "is_active",
                  "value": "true"
                },
                {
                  "key": "sensitivity_min",
                  "value": "2"
                },
                {
                  "key": "classification_level",
                  "value": "SECRET"
                },
                {
                  "key": "sort_by",
                  "value": "sensitivity_rating"
                },
                {
                  "key": "sort_order",
                  "value": "desc"
                }
              ]
            }
          }
        },
        {
          "name": "ðŸ†• v4.1.0: Filter by Retention Policy Fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Retention policy filtering returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Retention policy filters applied correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    // Check retention filters were applied",
                  "    const filters = metadata.filters_applied;",
                  "    pm.expect(filters).to.have.property('retention_type');",
                  "    pm.expect(filters).to.have.property('min_retention_years');",
                  "    ",
                  "    console.log('âœ… v4.1.0: Retention filters applied:', filters);",
                  "    ",
                  "    // Verify filtering worked on returned items",
                  "    const items = responseJson.items;",
                  "    if (items.length > 0) {",
                  "        items.forEach(item => {",
                  "            if (item.retention_type !== null) {",
                  "                pm.expect(item.retention_type).to.equal('regulatory');",
                  "            }",
                  "            if (item.min_retention_years !== null) {",
                  "                pm.expect(item.min_retention_years).to.be.at.least(5);",
                  "            }",
                  "        });",
                  "        ",
                  "        console.log('âœ… Retention filtering verified on', items.length, 'items');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications?page=1&size=20&retention_type=regulatory&min_retention_years=5&sort_by=retention_code&sort_order=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "retention_type",
                  "value": "regulatory"
                },
                {
                  "key": "min_retention_years",
                  "value": "5"
                },
                {
                  "key": "sort_by",
                  "value": "retention_code"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                }
              ]
            }
          }
        },
        {
          "name": "ðŸ†• v4.1.0: Search in Retention Policy Fields",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Retention policy search returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Retention policy search functionality works', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    // Should show search was applied",
                  "    pm.expect(metadata).to.have.property('search_term');",
                  "    pm.expect(metadata.search_term).to.equal('regulatory');",
                  "    ",
                  "    // Check if search term appears in retention policy fields",
                  "    const items = responseJson.items;",
                  "    const searchTerm = 'regulatory';",
                  "    ",
                  "    if (items.length > 0) {",
                  "        // At least one item should contain the search term in retention fields",
                  "        const hasSearchTerm = items.some(item => ",
                  "            item.retention_type?.toLowerCase().includes(searchTerm) ||",
                  "            item.retention_code?.toLowerCase().includes(searchTerm) ||",
                  "            item.trigger_event?.toLowerCase().includes(searchTerm) ||",
                  "            item.destruction_method?.toLowerCase().includes(searchTerm)",
                  "        );",
                  "        pm.expect(hasSearchTerm).to.be.true;",
                  "        ",
                  "        console.log('âœ… v4.1.0: Retention search results found:', items.length);",
                  "        console.log('  - First item retention_type:', items[0].retention_type);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications?page=1&size=20&search=regulatory&sort_by=retention_type&sort_order=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "search",
                  "value": "regulatory"
                },
                {
                  "key": "sort_by",
                  "value": "retention_type"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                }
              ]
            }
          }
        },
        {
          "name": "Get Classifications Summary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Classifications summary returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Summary has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    pm.expect(responseJson).to.have.property('summary');",
                  "    pm.expect(responseJson).to.have.property('by_classification_level');",
                  "    pm.expect(responseJson).to.have.property('by_organization');",
                  "    pm.expect(responseJson).to.have.property('generated_at');",
                  "    ",
                  "    // Check summary stats",
                  "    const summary = responseJson.summary;",
                  "    pm.expect(summary).to.have.property('total_classifications');",
                  "    pm.expect(summary).to.have.property('active_classifications');",
                  "    pm.expect(summary).to.have.property('inactive_classifications');",
                  "});",
                  "",
                  "pm.test('Summary arrays are valid', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    pm.expect(responseJson.by_classification_level).to.be.an('array');",
                  "    pm.expect(responseJson.by_organization).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications/summary",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications",
                "summary"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ†• Retention Policies",
      "item": [
        {
          "name": "Get All Retention Policies",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get all retention policies returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has pagination structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('pagination');",
                  "    pm.expect(responseJson).to.have.property('filters_applied');",
                  "    pm.expect(responseJson).to.have.property('sort_info');",
                  "    pm.expect(responseJson.items).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Retention policies have required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        pm.expect(firstItem).to.have.property('retention_policy_id');",
                  "        pm.expect(firstItem).to.have.property('name');",
                  "        pm.expect(firstItem).to.have.property('retention_code');",
                  "        pm.expect(firstItem).to.have.property('retention_period_days');",
                  "        pm.expect(firstItem).to.have.property('is_active');",
                  "        pm.expect(firstItem).to.have.property('classifications_count');",
                  "        ",
                  "        // Store retention policy ID for other tests",
                  "        pm.collectionVariables.set('retention_policy_id', firstItem.retention_policy_id);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies?page=1&size=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Get Retention Policy by ID",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure we have a retention_policy_id set",
                  "const policyId = pm.collectionVariables.get('retention_policy_id');",
                  "if (!policyId) {",
                  "    pm.collectionVariables.set('retention_policy_id', '1'); // Default to ID 1",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get retention policy by ID returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Retention policy has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('name');",
                  "    pm.expect(responseJson).to.have.property('description');",
                  "    pm.expect(responseJson).to.have.property('retention_code');",
                  "    pm.expect(responseJson).to.have.property('retention_period_days');",
                  "    pm.expect(responseJson).to.have.property('is_active');",
                  "    pm.expect(responseJson).to.have.property('classifications_count');",
                  "    pm.expect(responseJson).to.have.property('created_at');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies/{{retention_policy_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "{{retention_policy_id}}"
              ]
            }
          }
        },
        {
          "name": "Create New Retention Policy",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate unique test retention code",
                  "const testCode = 'TEST-RET-' + Math.random().toString(36).substr(2, 6).toUpperCase();",
                  "pm.collectionVariables.set('test_retention_code', testCode);",
                  "",
                  "console.log('Creating retention policy with code:', testCode);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Create retention policy returns 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Created retention policy has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('name');",
                  "    pm.expect(responseJson).to.have.property('retention_code');",
                  "    pm.expect(responseJson).to.have.property('retention_period_days');",
                  "    pm.expect(responseJson).to.have.property('is_active');",
                  "    pm.expect(responseJson).to.have.property('created_at');",
                  "    ",
                  "    // Store created retention policy ID for update/delete tests",
                  "    pm.collectionVariables.set('created_retention_policy_id', responseJson.retention_policy_id);",
                  "});",
                  "",
                  "pm.test('Created retention policy has correct values', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const testCode = pm.collectionVariables.get('test_retention_code');",
                  "    ",
                  "    pm.expect(responseJson.retention_code).to.eql(testCode);",
                  "    pm.expect(responseJson.name).to.eql('Test Retention Policy');",
                  "    pm.expect(responseJson.retention_period_days).to.eql(2555);",
                  "    pm.expect(responseJson.is_active).to.be.true;",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Retention Policy\",\n  \"description\": \"Test policy for API testing\",\n  \"retention_code\": \"{{test_retention_code}}\",\n  \"retention_period_days\": 2555,\n  \"applicable_data_types\": \"Documents, Records\",\n  \"jurisdiction\": \"Federal\",\n  \"legal_basis\": \"Test Regulation\",\n  \"disposition_method\": \"Secure Destruction\",\n  \"review_frequency\": \"Annual\",\n  \"policy_owner\": \"Test Owner\",\n  \"audit_required\": true,\n  \"is_active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/retention-policies",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies"
              ]
            }
          }
        },
        {
          "name": "Update Retention Policy",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Ensure we have a created retention policy to update",
                  "const createdId = pm.collectionVariables.get('created_retention_policy_id');",
                  "if (!createdId) {",
                  "    console.log('No created retention policy ID found, using default ID 1');",
                  "    pm.collectionVariables.set('created_retention_policy_id', '1');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Update retention policy returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Updated retention policy has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('name');",
                  "    pm.expect(responseJson).to.have.property('description');",
                  "    pm.expect(responseJson).to.have.property('modified_at');",
                  "    pm.expect(responseJson).to.have.property('modified_by');",
                  "});",
                  "",
                  "pm.test('Retention policy was updated correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.name).to.eql('Updated Test Retention Policy');",
                  "    pm.expect(responseJson.description).to.eql('Updated description for testing');",
                  "    pm.expect(responseJson.retention_period_days).to.eql(3650);",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Test Retention Policy\",\n  \"description\": \"Updated description for testing\",\n  \"retention_period_days\": 3650,\n  \"applicable_data_types\": \"Documents, Records, Archives\",\n  \"jurisdiction\": \"Federal/State\",\n  \"legal_basis\": \"Updated Test Regulation\",\n  \"disposition_method\": \"Secure Shredding\",\n  \"review_frequency\": \"Biannual\",\n  \"policy_owner\": \"Updated Test Owner\",\n  \"audit_required\": true,\n  \"is_active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/retention-policies/{{created_retention_policy_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "{{created_retention_policy_id}}"
              ]
            }
          }
        },
        {
          "name": "Delete Retention Policy (Soft)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Delete retention policy returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Delete response has correct message', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('is_active');",
                  "    pm.expect(responseJson.is_active).to.be.false;",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies/{{created_retention_policy_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "{{created_retention_policy_id}}"
              ]
            }
          }
        },
        {
          "name": "Restore Retention Policy",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Restore retention policy returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Restore response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_policy_id');",
                  "    pm.expect(responseJson).to.have.property('is_active');",
                  "    pm.expect(responseJson.is_active).to.be.true;",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restored_by\": \"api_test_user\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/retention-policies/{{created_retention_policy_id}}/restore",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "{{created_retention_policy_id}}",
                "restore"
              ]
            }
          }
        },
        {
          "name": "Retention Policies - Pagination & Filtering",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Retention policies pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Advanced pagination structure validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    // Check main structure",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('pagination');",
                  "    pm.expect(responseJson).to.have.property('filters_applied');",
                  "    pm.expect(responseJson).to.have.property('sort_info');",
                  "    ",
                  "    // Validate pagination object",
                  "    const pagination = responseJson.pagination;",
                  "    pm.expect(pagination).to.have.property('page', 1);",
                  "    pm.expect(pagination).to.have.property('size', 5);",
                  "    pm.expect(pagination).to.have.property('total');",
                  "    pm.expect(pagination).to.have.property('pages');",
                  "    pm.expect(pagination).to.have.property('has_next');",
                  "    pm.expect(pagination).to.have.property('has_previous', false);",
                  "});",
                  "",
                  "pm.test('Filter validation', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const filters = responseJson.filters_applied;",
                  "    ",
                  "    // Check applied filters",
                  "    pm.expect(filters).to.have.property('is_active', true);",
                  "    pm.expect(filters).to.have.property('min_retention_days', 1000);",
                  "});",
                  "",
                  "pm.test('Items are filtered correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const items = responseJson.items;",
                  "    ",
                  "    if (items.length > 0) {",
                  "        items.forEach(item => {",
                  "            pm.expect(item.is_active).to.be.true;",
                  "            pm.expect(item.retention_period_days).to.be.at.least(1000);",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies?page=1&size=5&is_active=true&min_retention_days=1000&sort_by=retention_period_days&sort_order=desc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "5"
                },
                {
                  "key": "is_active",
                  "value": "true"
                },
                {
                  "key": "min_retention_days",
                  "value": "1000"
                },
                {
                  "key": "sort_by",
                  "value": "retention_period_days"
                },
                {
                  "key": "sort_order",
                  "value": "desc"
                }
              ]
            }
          }
        },
        {
          "name": "Retention Policies - Search",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Retention policy search returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search results are filtered', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    // Should show search was applied",
                  "    pm.expect(responseJson).to.have.property('search_applied');",
                  "    ",
                  "    // Check if search term appears in results",
                  "    const items = responseJson.items;",
                  "    const searchTerm = 'financial';",
                  "    ",
                  "    if (items.length > 0) {",
                  "        // At least one item should contain the search term",
                  "        const hasSearchTerm = items.some(item => ",
                  "            item.name?.toLowerCase().includes(searchTerm) ||",
                  "            item.description?.toLowerCase().includes(searchTerm) ||",
                  "            item.retention_code?.toLowerCase().includes(searchTerm)",
                  "        );",
                  "        console.log('Search results found:', items.length);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies?page=1&size=20&search=financial&sort_by=name&sort_order=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "search",
                  "value": "financial"
                },
                {
                  "key": "sort_by",
                  "value": "name"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                }
              ]
            }
          }
        },
        {
          "name": "Get Retention Policies Summary",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Retention policies summary returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Summary has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    pm.expect(responseJson).to.have.property('total_policies');",
                  "    pm.expect(responseJson).to.have.property('active_policies');",
                  "    pm.expect(responseJson).to.have.property('inactive_policies');",
                  "    pm.expect(responseJson).to.have.property('avg_retention_days');",
                  "    pm.expect(responseJson).to.have.property('min_retention_days');",
                  "    pm.expect(responseJson).to.have.property('max_retention_days');",
                  "});",
                  "",
                  "pm.test('Summary statistics are logical', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    pm.expect(responseJson.total_policies).to.be.at.least(0);",
                  "    pm.expect(responseJson.active_policies).to.be.at.most(responseJson.total_policies);",
                  "    pm.expect(responseJson.inactive_policies).to.be.at.most(responseJson.total_policies);",
                  "    ",
                  "    if (responseJson.min_retention_days && responseJson.max_retention_days) {",
                  "        pm.expect(responseJson.min_retention_days).to.be.at.most(responseJson.max_retention_days);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies/summary",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "summary"
              ]
            }
          }
        },
        {
          "name": "Get Retention Types",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get retention types returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Retention types response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('retention_types');",
                  "    pm.expect(responseJson.retention_types).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies/types",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "types"
              ]
            }
          }
        },
        {
          "name": "Get Jurisdictions",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get jurisdictions returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Jurisdictions response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('jurisdictions');",
                  "    pm.expect(responseJson.jurisdictions).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies/jurisdictions",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "jurisdictions"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Lookups",
      "item": [
        {
          "name": "Get All Lookup Types",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get lookup types returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('total');",
                  "    pm.expect(responseJson).to.have.property('page');",
                  "    pm.expect(responseJson).to.have.property('size');",
                  "    pm.expect(responseJson).to.have.property('pages');",
                  "    pm.expect(responseJson.items).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Lookup types have required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        pm.expect(firstItem).to.have.property('lookup_type');",
                  "        pm.expect(firstItem).to.have.property('display_name');",
                  "        pm.expect(firstItem).to.have.property('is_active');",
                  "        ",
                  "        // Store lookup type for other tests",
                  "        pm.collectionVariables.set('lookup_type', firstItem.lookup_type);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/types?page=1&size=20",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "types"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get Specific Lookup Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get lookup type returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Lookup type has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('lookup_type');",
                  "    pm.expect(responseJson).to.have.property('display_name');",
                  "    pm.expect(responseJson).to.have.property('description');",
                  "    pm.expect(responseJson).to.have.property('is_active');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/types/{{lookup_type}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "types",
                "{{lookup_type}}"
              ]
            }
          }
        },
        {
          "name": "Get Lookup Codes by Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get lookup codes returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('total');",
                  "    pm.expect(responseJson).to.have.property('lookup_type');",
                  "    pm.expect(responseJson.items).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Lookup codes have required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstCode = responseJson.items[0];",
                  "        pm.expect(firstCode).to.have.property('lookup_code');",
                  "        pm.expect(firstCode).to.have.property('lookup_type');",
                  "        pm.expect(firstCode).to.have.property('display_name');",
                  "        pm.expect(firstCode).to.have.property('is_active');",
                  "        ",
                  "        // Store lookup code for other tests",
                  "        pm.collectionVariables.set('lookup_code', firstCode.lookup_code);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/codes/{{lookup_type}}?page=1&size=50",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "codes",
                "{{lookup_type}}"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "50"
                }
              ]
            }
          }
        },
        {
          "name": "Get Summary Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get lookup summary returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Summary has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('total_lookup_types');",
                  "    pm.expect(responseJson).to.have.property('active_lookup_types');",
                  "    pm.expect(responseJson).to.have.property('total_lookup_codes');",
                  "    pm.expect(responseJson).to.have.property('active_lookup_codes');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/summary",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "summary"
              ]
            }
          }
        },
        {
          "name": "Lookup Codes - All with Pagination",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get all lookup codes returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Enhanced pagination structure for lookups', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    // Check main structure",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('pagination');",
                  "    pm.expect(responseJson).to.have.property('metadata');",
                  "    ",
                  "    // Check pagination object",
                  "    const pagination = responseJson.pagination;",
                  "    pm.expect(pagination).to.have.property('page');",
                  "    pm.expect(pagination).to.have.property('size');",
                  "    pm.expect(pagination).to.have.property('total');",
                  "    pm.expect(pagination).to.have.property('has_next');",
                  "    pm.expect(pagination).to.have.property('has_previous');",
                  "});",
                  "",
                  "pm.test('Lookup codes have required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        pm.expect(firstItem).to.have.property('lookup_code');",
                  "        pm.expect(firstItem).to.have.property('display_name');",
                  "        pm.expect(firstItem).to.have.property('lookup_type');",
                  "        pm.expect(firstItem).to.have.property('is_active');",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/codes?page=1&size=25&sort_by=lookup_type&sort_order=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "codes"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "25"
                },
                {
                  "key": "sort_by",
                  "value": "lookup_type"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                }
              ]
            }
          }
        },
        {
          "name": "Lookup Codes - By Type Enhanced",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Get lookup codes by type returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Type-specific lookup pagination', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    // Should have lookup_type in response metadata",
                  "    pm.expect(responseJson).to.have.property('lookup_type');",
                  "    ",
                  "    // All items should be of the requested type",
                  "    const items = responseJson.items;",
                  "    if (items.length > 0) {",
                  "        items.forEach(item => {",
                  "            pm.expect(item.lookup_type).to.equal(responseJson.lookup_type);",
                  "        });",
                  "    }",
                  "});",
                  "",
                  "pm.test('Active filter applied correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    // Check if active filter was applied",
                  "    if (metadata.filters_applied.is_active === true) {",
                  "        const items = responseJson.items;",
                  "        items.forEach(item => {",
                  "            pm.expect(item.is_active).to.be.true;",
                  "        });",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/codes/{{lookup_type}}?page=1&size=50&is_active=true&sort_by=sort_order&sort_order=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "codes",
                "{{lookup_type}}"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "50"
                },
                {
                  "key": "is_active",
                  "value": "true"
                },
                {
                  "key": "sort_by",
                  "value": "sort_order"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                }
              ]
            }
          }
        },
        {
          "name": "Lookup Codes - Cursor Pagination",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Lookup cursor pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Cursor pagination for lookups', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const pagination = responseJson.pagination;",
                  "    ",
                  "    // Cursor pagination specifics",
                  "    pm.expect(pagination).to.have.property('next_cursor');",
                  "    pm.expect(pagination).to.have.property('previous_cursor');",
                  "    pm.expect(pagination.total).to.equal(-1);",
                  "    ",
                  "    // Store cursor for next request",
                  "    if (pagination.next_cursor) {",
                  "        pm.collectionVariables.set('lookup_next_cursor', pagination.next_cursor);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Performance is good for cursor pagination', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/codes?pagination_type=cursor&size=30",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "codes"
              ],
              "query": [
                {
                  "key": "pagination_type",
                  "value": "cursor"
                },
                {
                  "key": "size",
                  "value": "30"
                }
              ]
            }
          }
        },
        {
          "name": "Lookup Codes - Advanced Filtering",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Advanced lookup filtering returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Multiple lookup filters applied', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    const filters = metadata.filters_applied;",
                  "    ",
                  "    // Check applied filters",
                  "    pm.expect(filters).to.have.property('is_active');",
                  "    pm.expect(filters).to.have.property('parent_codes_only');",
                  "    ",
                  "    // Verify parent codes only filter",
                  "    if (filters.parent_codes_only === true) {",
                  "        const items = responseJson.items;",
                  "        // Note: parent_lookup_code_id field would be added to model if hierarchical lookups are implemented",
                  "        console.log('Parent codes filter applied, items found:', items.length);",
                  "    }",
                  "});",
                  "",
                  "pm.test('Search functionality works', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const metadata = responseJson.metadata;",
                  "    ",
                  "    if (metadata.search_term) {",
                  "        console.log('Search results:', responseJson.items.length);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/codes?page=1&size=20&is_active=true&parent_codes_only=true&search=status&sort_by=display_name&sort_order=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "codes"
              ],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "is_active",
                  "value": "true"
                },
                {
                  "key": "parent_codes_only",
                  "value": "true"
                },
                {
                  "key": "search",
                  "value": "status"
                },
                {
                  "key": "sort_by",
                  "value": "name"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                }
              ]
            }
          }
        },
        {
          "name": "Lookup Types Summary Enhanced",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Enhanced lookup summary returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Enhanced summary structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    ",
                  "    pm.expect(responseJson).to.have.property('types');",
                  "    pm.expect(responseJson).to.have.property('total_types');",
                  "    pm.expect(responseJson).to.have.property('generated_at');",
                  "    ",
                  "    // Check types array structure",
                  "    const types = responseJson.types;",
                  "    if (types.length > 0) {",
                  "        const firstType = types[0];",
                  "        pm.expect(firstType).to.have.property('lookup_type');",
                  "        pm.expect(firstType).to.have.property('total_count');",
                  "        pm.expect(firstType).to.have.property('active_count');",
                  "        pm.expect(firstType).to.have.property('inactive_count');",
                  "        pm.expect(firstType).to.have.property('deleted_count');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Summary counts are logical', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const types = responseJson.types;",
                  "    ",
                  "    types.forEach(type => {",
                  "        const total = type.total_count;",
                  "        const active = type.active_count;",
                  "        const inactive = type.inactive_count;",
                  "        const deleted = type.deleted_count;",
                  "        ",
                  "        // Total should be >= sum of active + inactive + deleted",
                  "        pm.expect(total).to.be.at.least(active + inactive + deleted);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/types/summary",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "types",
                "summary"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Batch Lookups",
      "item": [
        {
          "name": "Batch Lookup (POST)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Batch lookup POST returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Batch response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('lookup_types');",
                  "    pm.expect(responseJson).to.have.property('requested_count');",
                  "    pm.expect(responseJson).to.have.property('found_count');",
                  "    pm.expect(responseJson).to.have.property('not_found');",
                  "    pm.expect(responseJson).to.have.property('total_codes');",
                  "    pm.expect(responseJson.lookup_types).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Batch lookup types have correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.lookup_types.length > 0) {",
                  "        const firstType = responseJson.lookup_types[0];",
                  "        pm.expect(firstType).to.have.property('lookup_type');",
                  "        pm.expect(firstType).to.have.property('display_name');",
                  "        pm.expect(firstType).to.have.property('codes');",
                  "        pm.expect(firstType).to.have.property('code_count');",
                  "        pm.expect(firstType.codes).to.be.an('array');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"lookup_types\": [\"STATUS\", \"PRIORITY\", \"CATEGORY\"],\n  \"active_only\": true,\n  \"include_inactive_types\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/lookups/batch/codes",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "batch",
                "codes"
              ]
            }
          }
        },
        {
          "name": "Cursor Pagination - Lookup Codes by Type",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Set a test lookup type",
                  "pm.collectionVariables.set('lookup_type', 'STATUS');"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Cursor pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has cursor pagination structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('pagination');",
                  "    pm.expect(responseJson).to.have.property('cursor_info');",
                  "    pm.expect(responseJson.pagination_type).to.eql('cursor');",
                  "});",
                  "",
                  "pm.test('Cursor info has required fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const cursorInfo = responseJson.cursor_info;",
                  "    pm.expect(cursorInfo).to.have.property('has_more');",
                  "    pm.expect(cursorInfo).to.have.property('cursor_field');",
                  "    pm.expect(cursorInfo).to.have.property('next_cursor');",
                  "});",
                  "",
                  "pm.test('Items have correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        pm.expect(firstItem).to.have.property('lookup_code');",
                  "        pm.expect(firstItem).to.have.property('lookup_type');",
                  "        pm.expect(firstItem).to.have.property('display_name');",
                  "        pm.expect(firstItem.lookup_type).to.eql(pm.collectionVariables.get('lookup_type'));",
                  "    }",
                  "});",
                  "",
                  "pm.test('Lookup type info is included', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('lookup_type_info');",
                  "    pm.expect(responseJson.lookup_type_info).to.have.property('display_name');",
                  "});",
                  "",
                  "// Save next cursor for potential follow-up request",
                  "const responseJson = pm.response.json();",
                  "if (responseJson.cursor_info && responseJson.cursor_info.next_cursor) {",
                  "    pm.collectionVariables.set('next_cursor', responseJson.cursor_info.next_cursor);",
                  "}",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/types/{{lookup_type}}/codes/cursor?size=10&sort_by=lookup_code&sort_order=asc&active_only=true",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "types",
                "{{lookup_type}}",
                "codes",
                "cursor"
              ],
              "query": [
                {
                  "key": "size",
                  "value": "10"
                },
                {
                  "key": "sort_by",
                  "value": "lookup_code"
                },
                {
                  "key": "sort_order",
                  "value": "asc"
                },
                {
                  "key": "active_only",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Cursor Pagination - Next Page",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// This test uses the cursor from the previous request",
                  "const nextCursor = pm.collectionVariables.get('next_cursor');",
                  "if (!nextCursor) {",
                  "    console.log('No next cursor available - run the first cursor test first');",
                  "    pm.collectionVariables.set('lookup_type', 'STATUS');",
                  "}"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Next page cursor pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response maintains cursor pagination structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('cursor_info');",
                  "    pm.expect(responseJson.pagination_type).to.eql('cursor');",
                  "});",
                  "",
                  "pm.test('Cursor navigation works', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const cursorInfo = responseJson.cursor_info;",
                  "    // Should have previous cursor since this is page 2+",
                  "    pm.expect(cursorInfo).to.have.property('previous_cursor');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/types/{{lookup_type}}/codes/cursor?cursor={{next_cursor}}&size=10&sort_by=lookup_code&sort_order=asc",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "types",
                "{{lookup_type}}",
                "codes",
                "cursor"
              ],
              "query": [
                {
                  "key": "cursor",
                  "value": "{{next_cursor}}"
                },
                {
                  "key": "size",
                  "value": "10"
                },
                {
                  "key": "sort_by",
                  "value": "lookup_code"
                },
                {
                  "key": "sort_order",
                  "value": "sort_order"
                }
              ]
            }
          }
        },
        {
          "name": "Batch Cursor Pagination - Grouped by Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Batch cursor pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has batch cursor pagination structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('lookup_types');",
                  "    pm.expect(responseJson).to.have.property('cursor_info');",
                  "    pm.expect(responseJson.pagination_type).to.eql('cursor');",
                  "    pm.expect(responseJson).to.have.property('requested_count');",
                  "    pm.expect(responseJson).to.have.property('found_count');",
                  "});",
                  "",
                  "pm.test('Lookup types are grouped correctly', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.lookup_types).to.be.an('array');",
                  "    if (responseJson.lookup_types.length > 0) {",
                  "        const firstType = responseJson.lookup_types[0];",
                  "        pm.expect(firstType).to.have.property('lookup_type');",
                  "        pm.expect(firstType).to.have.property('items');",
                  "        pm.expect(firstType).to.have.property('pagination');",
                  "        pm.expect(firstType).to.have.property('display_name');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Cursor info has batch-specific fields', function () {",
                  "    const responseJson = pm.response.json();",
                  "    const cursorInfo = responseJson.cursor_info;",
                  "    pm.expect(cursorInfo).to.have.property('has_more');",
                  "    pm.expect(cursorInfo).to.have.property('cursor_field');",
                  "    // Batch pagination may have multiple cursors",
                  "    if (cursorInfo.has_more) {",
                  "        pm.expect(cursorInfo).to.have.property('next_cursors');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Query params are preserved', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('query_params');",
                  "    pm.expect(responseJson.query_params).to.have.property('lookup_types');",
                  "    pm.expect(responseJson.query_params).to.have.property('group_by_type');",
                  "    pm.expect(responseJson.query_params.group_by_type).to.be.true;",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"lookup_types\": [\"STATUS\", \"PRIORITY\", \"CATEGORY\"],\n    \"size\": 5,\n    \"sort_by\": \"lookup_code\",\n    \"sort_order\": \"asc\",\n    \"active_only\": true,\n    \"group_by_type\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/lookups/batch/codes/cursor",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "batch",
                "codes",
                "cursor"
              ]
            }
          }
        },
        {
          "name": "Batch Cursor Pagination - Unified Results",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Unified batch cursor pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has unified structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('items');",
                  "    pm.expect(responseJson).to.have.property('lookup_types_info');",
                  "    pm.expect(responseJson.pagination_type).to.eql('cursor');",
                  "    pm.expect(responseJson).to.not.have.property('lookup_types'); // No grouping",
                  "});",
                  "",
                  "pm.test('Items include type information', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items && responseJson.items.length > 0) {",
                  "        const firstItem = responseJson.items[0];",
                  "        pm.expect(firstItem).to.have.property('lookup_type_info');",
                  "        pm.expect(firstItem.lookup_type_info).to.have.property('display_name');",
                  "    }",
                  "});",
                  "",
                  "pm.test('Lookup types info is provided', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.lookup_types_info).to.be.an('array');",
                  "    pm.expect(responseJson.lookup_types_info.length).to.be.at.least(1);",
                  "});",
                  "",
                  "pm.test('Query params reflect unified mode', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.query_params.group_by_type).to.be.false;",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(4000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"lookup_types\": [\"STATUS\", \"PRIORITY\"],\n    \"size\": 10,\n    \"sort_by\": \"display_name\",\n    \"sort_order\": \"desc\",\n    \"active_only\": true,\n    \"group_by_type\": false,\n    \"search\": \"\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/lookups/batch/codes/cursor",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "batch",
                "codes",
                "cursor"
              ]
            }
          }
        },
        {
          "name": "Batch Cursor Pagination - With Search",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Search in batch cursor pagination returns 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search filtering works across types', function () {",
                  "    const responseJson = pm.response.json();",
                  "    if (responseJson.items && responseJson.items.length > 0) {",
                  "        // Items should contain the search term",
                  "        const searchTerm = 'active'; // From request body",
                  "        const hasSearchTerm = responseJson.items.some(item => ",
                  "            (item.lookup_code && item.lookup_code.toLowerCase().includes(searchTerm)) ||",
                  "            (item.display_name && item.display_name.toLowerCase().includes(searchTerm)) ||",
                  "            (item.description && item.description.toLowerCase().includes(searchTerm))",
                  "        );",
                  "        // pm.expect(hasSearchTerm).to.be.true; // Commented since we may not have 'active' in test data",
                  "    }",
                  "});",
                  "",
                  "pm.test('Search parameters are preserved', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson.query_params.search).to.eql('active');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable with search', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"lookup_types\": [\"STATUS\", \"PRIORITY\"],\n    \"size\": 8,\n    \"sort_by\": \"lookup_code\",\n    \"sort_order\": \"asc\",\n    \"search\": \"active\",\n    \"active_only\": true,\n    \"group_by_type\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/lookups/batch/codes/cursor",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "batch",
                "codes",
                "cursor"
              ]
            }
          }
        },
        {
          "name": "DEBUG - Test JSON Parsing",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Debug test endpoint responds', function () {",
                  "    // This should help us debug the JSON parsing issue",
                  "    console.log('Response status:', pm.response.code);",
                  "    console.log('Response body:', pm.response.text());",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 500]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"lookup_types\": [\"STATUS\"]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/lookups/batch/codes/cursor/test",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "batch",
                "codes",
                "cursor",
                "test"
              ]
            }
          }
        },
        {
          "name": "Batch Cursor Pagination - Error Cases",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Empty lookup_types returns 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error message is descriptive', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('message');",
                  "    pm.expect(responseJson.message).to.include('lookup_types');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"lookup_types\": [],\n    \"size\": 10\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/lookups/batch/codes/cursor",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "batch",
                "codes",
                "cursor"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Error Handling",
      "item": [
        {
          "name": "404 - Non-existent Classification",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Non-existent classification returns 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Error response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('error');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/classifications/99999",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications",
                "99999"
              ]
            }
          }
        },
        {
          "name": "404 - Non-existent Lookup Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Non-existent lookup type returns 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Error response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('error');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/lookups/types/NONEXISTENT",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lookups",
                "types",
                "NONEXISTENT"
              ]
            }
          }
        },
        {
          "name": "400 - Invalid Classification Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Invalid data returns 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('error');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"\",\n  \"classification_code\": \"\",\n  \"retention_policy_id\": \"invalid\",\n  \"organization_id\": \"not_a_number\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/classifications",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "classifications"
              ]
            }
          }
        },
        {
          "name": "404 - Non-existent Retention Policy",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Non-existent retention policy returns 404', function () {",
                  "    pm.response.to.have.status(404);",
                  "});",
                  "",
                  "pm.test('Error response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('error');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/retention-policies/99999",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies",
                "99999"
              ]
            }
          }
        },
        {
          "name": "400 - Invalid Retention Policy Data",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Invalid retention policy data returns 400', function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test('Error response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('error');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"\",\n  \"retention_code\": \"\",\n  \"retention_period_days\": \"invalid_number\",\n  \"is_active\": \"not_boolean\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/retention-policies",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies"
              ]
            }
          }
        },
        {
          "name": "409 - Duplicate Retention Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Duplicate retention code returns 409', function () {",
                  "    pm.response.to.have.status(409);",
                  "});",
                  "",
                  "pm.test('Error response has correct structure', function () {",
                  "    const responseJson = pm.response.json();",
                  "    pm.expect(responseJson).to.have.property('error');",
                  "    pm.expect(responseJson.error).to.include('already exists');",
                  "});",
                  "",
                  "pm.test('Response time is acceptable', function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Duplicate Test Policy\",\n  \"description\": \"Test duplicate retention code\",\n  \"retention_code\": \"HR-RET-001\",\n  \"retention_period_days\": 1825,\n  \"is_active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/retention-policies",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "retention-policies"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Performance Testing",
      "item": [
        {
          "name": "Classification Performance Tests",
          "item": [
            {
              "name": "Performance Test - JOIN Comparison",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Performance test returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Response has performance comparison data', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('test_type');",
                      "    pm.expect(responseJson.test_type).to.eql('JOIN comparison');",
                      "    pm.expect(responseJson).to.have.property('with_retention_join');",
                      "    pm.expect(responseJson).to.have.property('without_retention_join');",
                      "    pm.expect(responseJson).to.have.property('performance_improvement');",
                      "});",
                      "",
                      "pm.test('Performance improvement is measurable', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const improvement = responseJson.performance_improvement;",
                      "    pm.expect(improvement).to.have.property('time_saved_ms');",
                      "    pm.expect(improvement).to.have.property('percentage_faster');",
                      "    ",
                      "    // Log performance results for analysis",
                      "    console.log('=== JOIN Performance Comparison ===');",
                      "    console.log('With JOIN:', responseJson.with_retention_join.query_time_ms + 'ms');",
                      "    console.log('Without JOIN:', responseJson.without_retention_join.query_time_ms + 'ms');",
                      "    console.log('Performance Improvement:', improvement.percentage_faster + '% faster');",
                      "    console.log('Time Saved:', improvement.time_saved_ms + 'ms');",
                      "});",
                      "",
                      "pm.test('Query without JOIN should be faster or equal', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const withJoin = responseJson.with_retention_join.query_time_ms;",
                      "    const withoutJoin = responseJson.without_retention_join.query_time_ms;",
                      "    pm.expect(withoutJoin).to.be.at.most(withJoin);",
                      "});",
                      "",
                      "pm.test('Both queries return same item count', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const withJoinCount = responseJson.with_retention_join.items_count;",
                      "    const withoutJoinCount = responseJson.without_retention_join.items_count;",
                      "    pm.expect(withJoinCount).to.eql(withoutJoinCount);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications/performance-test?type=comparison",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications",
                    "performance-test"
                  ],
                  "query": [
                    {
                      "key": "type",
                      "value": "comparison"
                    }
                  ]
                }
              }
            },
            {
              "name": "Performance Test - Search Optimization",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Search performance test returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Response has search performance data', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('test_type');",
                      "    pm.expect(responseJson.test_type).to.eql('search performance comparison');",
                      "    pm.expect(responseJson).to.have.property('smart_search');",
                      "    pm.expect(responseJson).to.have.property('always_join_search');",
                      "});",
                      "",
                      "pm.test('Search optimization shows improvement', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const smartTime = responseJson.smart_search.query_time_ms;",
                      "    const alwaysJoinTime = responseJson.always_join_search.query_time_ms;",
                      "    ",
                      "    // Log search performance results",
                      "    console.log('=== Search Performance Comparison ===');",
                      "    console.log('Search Term:', responseJson.search_term);",
                      "    console.log('Smart Search:', smartTime + 'ms');",
                      "    console.log('Always JOIN Search:', alwaysJoinTime + 'ms');",
                      "    console.log('Performance Improvement:', responseJson.performance_improvement.percentage_faster + '% faster');",
                      "    ",
                      "    // Smart search should be faster or equal",
                      "    pm.expect(smartTime).to.be.at.most(alwaysJoinTime);",
                      "});",
                      "",
                      "pm.test('Search results consistency', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const smartCount = responseJson.smart_search.items_found;",
                      "    const alwaysJoinCount = responseJson.always_join_search.items_found;",
                      "    ",
                      "    // Should find same or similar number of items",
                      "    pm.expect(Math.abs(smartCount - alwaysJoinCount)).to.be.at.most(1);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications/performance-test?type=search&search=document",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications",
                    "performance-test"
                  ],
                  "query": [
                    {
                      "key": "type",
                      "value": "search"
                    },
                    {
                      "key": "search",
                      "value": "document"
                    }
                  ]
                }
              }
            },
            {
              "name": "Performance Test - Minimal vs Full Response",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Minimal vs full performance test returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Response has minimal vs full comparison', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('test_type');",
                      "    pm.expect(responseJson.test_type).to.eql('minimal vs full response');",
                      "    pm.expect(responseJson).to.have.property('full_response');",
                      "    pm.expect(responseJson).to.have.property('minimal_response');",
                      "});",
                      "",
                      "pm.test('Minimal response shows performance benefits', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const fullTime = responseJson.full_response.query_time_ms;",
                      "    const minimalTime = responseJson.minimal_response.query_time_ms;",
                      "    const fullSize = responseJson.full_response.response_size_chars;",
                      "    const minimalSize = responseJson.minimal_response.response_size_chars;",
                      "    ",
                      "    // Log response optimization results",
                      "    console.log('=== Response Optimization Comparison ===');",
                      "    console.log('Full Response:', fullTime + 'ms, ' + fullSize + ' chars');",
                      "    console.log('Minimal Response:', minimalTime + 'ms, ' + minimalSize + ' chars');",
                      "    console.log('Size Reduction:', responseJson.performance_improvement.size_reduction_percentage + '%');",
                      "    ",
                      "    // Minimal should be smaller and potentially faster",
                      "    pm.expect(minimalSize).to.be.below(fullSize);",
                      "    pm.expect(minimalTime).to.be.at.most(fullTime + 10); // Allow small variance",
                      "});",
                      "",
                      "pm.test('Response size reduction is significant', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const sizeReduction = responseJson.performance_improvement.size_reduction_percentage;",
                      "    pm.expect(sizeReduction).to.be.above(0); // Should have some reduction",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications/performance-test?type=minimal",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications",
                    "performance-test"
                  ],
                  "query": [
                    {
                      "key": "type",
                      "value": "minimal"
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Optimized Classification Endpoints",
          "item": [
            {
              "name": "Optimized - Minimal Response",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Minimal classification list returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Response has minimal structure', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('items');",
                      "    pm.expect(responseJson).to.have.property('performance');",
                      "    ",
                      "    if (responseJson.items.length > 0) {",
                      "        const firstItem = responseJson.items[0];",
                      "        // Check for minimal fields only",
                      "        pm.expect(firstItem).to.have.property('classification_id');",
                      "        pm.expect(firstItem).to.have.property('classification_code');",
                      "        pm.expect(firstItem).to.have.property('name');",
                      "        pm.expect(firstItem).to.have.property('is_active');",
                      "        ",
                      "        // Should not have complex fields in minimal response",
                      "        pm.expect(firstItem).to.not.have.property('description');",
                      "    }",
                      "});",
                      "",
                      "pm.test('Performance optimizations are applied', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const perf = responseJson.performance.optimizations_applied;",
                      "    pm.expect(perf.minimal_response).to.be.true;",
                      "    pm.expect(perf.smart_joins).to.be.true;",
                      "});",
                      "",
                      "pm.test('Response time is optimized', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const queryTime = responseJson.performance.query_time_ms;",
                      "    console.log('Minimal response query time:', queryTime + 'ms');",
                      "    pm.expect(queryTime).to.be.below(200); // Should be fast",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications?minimal=true&size=10",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications"
                  ],
                  "query": [
                    {
                      "key": "minimal",
                      "value": "true"
                    },
                    {
                      "key": "size",
                      "value": "10"
                    }
                  ]
                }
              }
            },
            {
              "name": "Optimized - Field Selection",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Field selection returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Response contains only requested fields', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('items');",
                      "    ",
                      "    if (responseJson.items.length > 0) {",
                      "        const firstItem = responseJson.items[0];",
                      "        // Should have requested fields",
                      "        pm.expect(firstItem).to.have.property('classification_id');",
                      "        pm.expect(firstItem).to.have.property('name');",
                      "        pm.expect(firstItem).to.have.property('classification_code');",
                      "        pm.expect(firstItem).to.have.property('is_active');",
                      "        ",
                      "        // Should not have other fields",
                      "        const fieldCount = Object.keys(firstItem).length;",
                      "        pm.expect(fieldCount).to.be.at.most(5); // Only the 4 requested fields plus maybe id",
                      "    }",
                      "});",
                      "",
                      "pm.test('Field filtering optimization applied', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const optimizations = responseJson.response_optimizations;",
                      "    pm.expect(optimizations.fields_filtered).to.be.true;",
                      "});",
                      "",
                      "pm.test('Response time with field filtering', function () {",
                      "    const responseJson = pm.response.json();",
                      "    console.log('Field filtered response items:', responseJson.response_optimizations.item_count);",
                      "    pm.expect(pm.response.responseTime).to.be.below(500);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications?fields=classification_id,name,classification_code,is_active&size=15",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications"
                  ],
                  "query": [
                    {
                      "key": "fields",
                      "value": "classification_id,name,classification_code,is_active"
                    },
                    {
                      "key": "size",
                      "value": "15"
                    }
                  ]
                }
              }
            },
            {
              "name": "Optimized - Compressed Response",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Compressed response returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Response may be compressed for large data', function () {",
                      "    // Check if compression was applied (indicated by Content-Encoding header)",
                      "    const contentEncoding = pm.response.headers.get('Content-Encoding');",
                      "    if (contentEncoding) {",
                      "        console.log('Response compression applied:', contentEncoding);",
                      "        pm.expect(contentEncoding).to.eql('gzip');",
                      "    } else {",
                      "        console.log('Response not compressed (likely small size)');",
                      "    }",
                      "});",
                      "",
                      "pm.test('Large dataset performance', function () {",
                      "    const responseJson = pm.response.json();",
                      "    const itemCount = responseJson.items ? responseJson.items.length : 0;",
                      "    console.log('Retrieved', itemCount, 'classifications');",
                      "    ",
                      "    // Should handle large responses efficiently",
                      "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                      "});",
                      "",
                      "pm.test('Performance metrics included', function () {",
                      "    const responseJson = pm.response.json();",
                      "    if (responseJson.performance) {",
                      "        console.log('Query execution time:', responseJson.performance.query_time_ms + 'ms');",
                      "        pm.expect(responseJson.performance.query_time_ms).to.be.a('number');",
                      "    }",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications?compress=true&size=50",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications"
                  ],
                  "query": [
                    {
                      "key": "compress",
                      "value": "true"
                    },
                    {
                      "key": "size",
                      "value": "50"
                    }
                  ]
                }
              }
            },
            {
              "name": "Optimized - Smart Search (Classification Only)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Optimized search returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Search performance is optimized', function () {",
                      "    const responseJson = pm.response.json();",
                      "    ",
                      "    // Should have performance metrics",
                      "    if (responseJson.performance) {",
                      "        const queryTime = responseJson.performance.query_time_ms;",
                      "        console.log('Smart search query time:', queryTime + 'ms');",
                      "        pm.expect(queryTime).to.be.below(300); // Should be fast for classification-only search",
                      "    }",
                      "});",
                      "",
                      "pm.test('Search finds relevant results', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('items');",
                      "    ",
                      "    // Check if results are relevant to search term",
                      "    if (responseJson.items.length > 0) {",
                      "        const firstItem = responseJson.items[0];",
                      "        console.log('First result:', firstItem.name || firstItem.classification_code);",
                      "    }",
                      "});",
                      "",
                      "pm.test('Search applied in filters', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson.search_applied).to.eql('document');",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications?search=document&minimal=true&size=10",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications"
                  ],
                  "query": [
                    {
                      "key": "search",
                      "value": "document"
                    },
                    {
                      "key": "minimal",
                      "value": "true"
                    },
                    {
                      "key": "size",
                      "value": "10"
                    }
                  ]
                }
              }
            },
            {
              "name": "Optimized - Retention Search (With JOIN)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Retention search returns 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Retention search uses JOIN when needed', function () {",
                      "    const responseJson = pm.response.json();",
                      "    ",
                      "    // This search should trigger retention policy JOIN",
                      "    // Performance will be slower but functionality is maintained",
                      "    if (responseJson.performance) {",
                      "        console.log('Retention search query time:', responseJson.performance.query_time_ms + 'ms');",
                      "        console.log('This search required retention policy JOIN');",
                      "    }",
                      "});",
                      "",
                      "pm.test('Search functionality maintained', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('items');",
                      "    pm.expect(responseJson.search_applied).to.eql('retention');",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications?search=retention&size=10",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications"
                  ],
                  "query": [
                    {
                      "key": "search",
                      "value": "retention"
                    },
                    {
                      "key": "size",
                      "value": "10"
                    }
                  ]
                }
              }
            }
          ]
        },
        {
          "name": "Performance Monitoring",
          "item": [
            {
              "name": "Performance Baseline - Standard Request",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "// Performance baseline test - measures standard API performance",
                      "pm.test('Standard request completes successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Response time baseline measurement', function () {",
                      "    const responseTime = pm.response.responseTime;",
                      "    console.log('=== Performance Baseline ===');",
                      "    console.log('Standard classification list response time:', responseTime + 'ms');",
                      "    ",
                      "    // Set baseline expectations",
                      "    pm.expect(responseTime).to.be.below(1000); // Should complete within 1 second",
                      "    ",
                      "    // Store baseline for comparison",
                      "    pm.collectionVariables.set('baseline_response_time', responseTime);",
                      "});",
                      "",
                      "pm.test('Response structure baseline', function () {",
                      "    const responseJson = pm.response.json();",
                      "    pm.expect(responseJson).to.have.property('items');",
                      "    pm.expect(responseJson).to.have.property('pagination');",
                      "    ",
                      "    const itemCount = responseJson.items ? responseJson.items.length : 0;",
                      "    console.log('Items returned:', itemCount);",
                      "    pm.collectionVariables.set('baseline_item_count', itemCount);",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications?size=20",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications"
                  ],
                  "query": [
                    {
                      "key": "size",
                      "value": "20"
                    }
                  ]
                }
              }
            },
            {
              "name": "Performance Comparison - Optimized vs Standard",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test('Optimized request completes successfully', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Performance improvement measurement', function () {",
                      "    const optimizedTime = pm.response.responseTime;",
                      "    const baselineTime = pm.collectionVariables.get('baseline_response_time');",
                      "    ",
                      "    console.log('=== Performance Comparison ===');",
                      "    console.log('Baseline response time:', baselineTime + 'ms');",
                      "    console.log('Optimized response time:', optimizedTime + 'ms');",
                      "    ",
                      "    if (baselineTime && baselineTime > 0) {",
                      "        const improvement = ((baselineTime - optimizedTime) / baselineTime * 100);",
                      "        console.log('Performance improvement:', improvement.toFixed(1) + '%');",
                      "        ",
                      "        // Optimized should be faster or similar",
                      "        pm.expect(optimizedTime).to.be.at.most(baselineTime * 1.1); // Allow 10% variance",
                      "    }",
                      "});",
                      "",
                      "pm.test('Optimized response metrics', function () {",
                      "    const responseJson = pm.response.json();",
                      "    ",
                      "    if (responseJson.performance) {",
                      "        const queryTime = responseJson.performance.query_time_ms;",
                      "        const optimizations = responseJson.performance.optimizations_applied;",
                      "        ",
                      "        console.log('Query execution time:', queryTime + 'ms');",
                      "        console.log('Optimizations applied:', JSON.stringify(optimizations));",
                      "        ",
                      "        pm.expect(optimizations.smart_joins).to.be.true;",
                      "        pm.expect(optimizations.minimal_response).to.be.true;",
                      "    }",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{base_url}}/api/classifications?minimal=true&size=20",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "classifications"
                  ],
                  "query": [
                    {
                      "key": "minimal",
                      "value": "true"
                    },
                    {
                      "key": "size",
                      "value": "20"
                    }
                  ]
                }
              }
            }
          ]
        }
      ]
    }
  ]
}